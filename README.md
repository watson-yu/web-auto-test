# ğŸš€ ç¶²é è‡ªå‹•æ¸¬è©¦å·¥å…·

ä¸€å€‹æ¡ç”¨ä¸‰å±¤æ¶æ§‹è¨­è¨ˆçš„ç¶²é è‡ªå‹•æ¸¬è©¦å·¥å…·ï¼Œæ”¯æ´éš¨æ©Ÿé»æ“Šæ¸¬è©¦å’Œå…ƒç´ æŠ“å–åŠŸèƒ½ã€‚

## âœ¨ ç‰¹è‰²åŠŸèƒ½

- ğŸ—ï¸ **ä¸‰å±¤æ¶æ§‹è¨­è¨ˆ** - ç°¡æ½”æ˜“ç¶­è­·çš„åˆ†å±¤çµæ§‹
- ğŸ¯ **ç°¡åŒ– API** - ç”¨æˆ¶åªéœ€å°ˆæ³¨æ¸¬è©¦é‚è¼¯
- ğŸŒ **æ™ºèƒ½å…ƒç´ æŠ“å–** - è‡ªå‹•è­˜åˆ¥å¯é»æ“Šå…ƒç´ 
- ğŸ² **éš¨æ©Ÿé»æ“Šæ¸¬è©¦** - æ¨¡æ“¬çœŸå¯¦ç”¨æˆ¶è¡Œç‚º
- ğŸ“± **å½ˆæ€§è¦–çª—è¨­å®š** - å¯è‡ªè¨‚è¦–çª—å¯¬åº¦ï¼Œè‡ªå‹•é©æ‡‰è¢å¹•é«˜åº¦
- ğŸ–¥ï¸ **æœ‰é ­/ç„¡é ­æ¨¡å¼** - æ”¯æ´è¦–è¦ºåŒ–å’Œå¾Œå°é‹è¡Œ
- ğŸ”„ **æŒä¹…ç€è¦½å™¨æœƒè©±** - ä¿æŒç€è¦½å™¨é–‹å•Ÿé€²è¡Œé€£çºŒæ¸¬è©¦
- ğŸ“ **æœƒè©±æ—¥èªŒè¨˜éŒ„** - è‡ªå‹•è¨˜éŒ„æ¯æ¬¡æ¸¬è©¦çš„è©³ç´°éç¨‹å’Œçµæœ
- ğŸ›‘ **å¾ªç’°æª¢æ¸¬** - è‡ªå‹•åµæ¸¬é é¢å¾ªç’°ï¼Œé¿å…ç„¡é™æ¸¬è©¦

## ğŸ—ï¸ ä¸‰å±¤æ¶æ§‹è¨­è¨ˆ

æ­¤é …ç›®çš„æ ¸å¿ƒç‰¹è‰²æ˜¯æ¡ç”¨ä¸‰å±¤æ¶æ§‹ï¼Œè®“ä»£ç¢¼æ›´åŠ æ¨¡çµ„åŒ–ã€å¯ç¶­è­·ï¼Œä¸¦ä¸”ç”¨æˆ¶å¯ä»¥è¼•æ˜“è‡ªå®šç¾©æ¸¬è©¦æµç¨‹ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç¬¬ä¸€å±¤ï¼šä¸»ç¨‹å¼å±¤                           â”‚
â”‚                     main.py                                â”‚
â”‚  ğŸ¯ ç°¡å–®çš„æ¸¬è©¦æµç¨‹ï¼Œç”¨æˆ¶å¯è¼•æ˜“ä¿®æ”¹                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç¬¬äºŒå±¤ï¼šæ¸¬è©¦å¼•æ“å±¤                         â”‚
â”‚                    engine.py                               â”‚
â”‚  ğŸ”§ åŒ…è£åº•å±¤åŠŸèƒ½ï¼Œæä¾›ç°¡åŒ– API                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç¬¬ä¸‰å±¤ï¼šæ ¸å¿ƒåŠŸèƒ½å±¤                         â”‚
â”‚                    scraper.py                              â”‚
â”‚  âš™ï¸ ç¶²é æŠ“å–ã€å…ƒç´ æå–ã€ç€è¦½å™¨æ“ä½œ                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¯ å„å±¤è·è²¬

#### ç¬¬ä¸€å±¤ï¼šä¸»ç¨‹å¼å±¤ (`main.py`)
- **è·è²¬**ï¼šæ¸¬è©¦æµç¨‹æ§åˆ¶ã€ç”¨æˆ¶ç•Œé¢ã€æ¥­å‹™é‚è¼¯
- **ç‰¹é»**ï¼šç°¡å–®æ˜“æ‡‚ã€ç”¨æˆ¶å¯è¼•æ˜“ä¿®æ”¹
- **ä¸»è¦å‡½æ•¸**ï¼š
  - `basic_test_flow()` - åŸºæœ¬è‡ªå‹•æ¸¬è©¦æµç¨‹
  - `interactive_test_flow()` - äº’å‹•å¼æ¸¬è©¦æµç¨‹
  - `custom_test_example()` - è‡ªå®šç¾©æ¸¬è©¦ç¯„ä¾‹

#### ç¬¬äºŒå±¤ï¼šæ¸¬è©¦å¼•æ“å±¤ (`engine.py`)
- **è·è²¬**ï¼šåŒ…è£åº•å±¤åŠŸèƒ½ã€æä¾›ç°¡åŒ– APIã€éŒ¯èª¤è™•ç†
- **ç‰¹é»**ï¼šä¸­ä»‹å±¤ã€ç°¡åŒ–è¤‡é›œæ“ä½œã€çµ±ä¸€æ¥å£
- **ä¸»è¦ API**ï¼š
  - `get_page_elements(url)` - ç²å–é é¢å…ƒç´ 
  - `click_and_navigate(choice)` - é»æ“Šä¸¦å°èˆª
  - `start_persistent_browser(url)` - å•Ÿå‹•æŒä¹…ç€è¦½å™¨
  - `print_current_elements()` - é¡¯ç¤ºç•¶å‰å…ƒç´ 

#### ç¬¬ä¸‰å±¤ï¼šæ ¸å¿ƒåŠŸèƒ½å±¤ (`scraper.py`)
- **è·è²¬**ï¼šç¶²é æŠ“å–ã€å…ƒç´ æå–ã€ç€è¦½å™¨æ“ä½œ
- **ç‰¹é»**ï¼šåº•å±¤å¯¦ç¾ã€åŠŸèƒ½å®Œæ•´ã€å¯é‡ç”¨
- **æŠ€è¡“ç´°ç¯€**ï¼šè™•ç† Seleniumã€BeautifulSoup ç­‰

### ğŸ¨ æ¶æ§‹å„ªå‹¢

1. **é—œæ³¨é»åˆ†é›¢** - æ¯å±¤å°ˆæ³¨æ–¼ç‰¹å®šè·è²¬
2. **æ˜“æ–¼ç¶­è­·** - ä¿®æ”¹ä¸€å±¤ä¸å½±éŸ¿å…¶ä»–å±¤
3. **ç”¨æˆ¶å‹å¥½** - ç¬¬ä¸€å±¤ä»£ç¢¼ç°¡å–®ï¼Œéš±è—æŠ€è¡“ç´°ç¯€
4. **å¯æ“´å±•æ€§** - æ˜“æ–¼æ·»åŠ æ–°åŠŸèƒ½å’Œæ¸¬è©¦ç­–ç•¥

## ğŸ“¦ å®‰è£

1. **å®‰è£ä¾è³´é …ç›®**ï¼š
```bash
pip install -r requirements.txt
```

2. **ç¢ºä¿ Chrome ç€è¦½å™¨å·²å®‰è£**
   - å·¥å…·æœƒè‡ªå‹•ä¸‹è¼‰å’Œç®¡ç† ChromeDriver

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å¿«é€Ÿé©—è­‰

```bash
# é¦–æ¬¡ä½¿ç”¨å»ºè­°å…ˆé‹è¡Œå¿«é€Ÿæ¸¬è©¦
python test.py
```

### åŸºæœ¬ä½¿ç”¨

```bash
python main.py
```

é¸æ“‡æ¸¬è©¦æ¨¡å¼ï¼š
1. **åŸºæœ¬è‡ªå‹•æ¸¬è©¦** - éš¨æ©Ÿé»æ“Šæ¸¬è©¦
2. **äº’å‹•å¼æ¸¬è©¦** - æ‰‹å‹•é¸æ“‡è¦é»æ“Šçš„å…ƒç´ 
3. **è‡ªå®šç¾©æ¸¬è©¦ç¯„ä¾‹** - ç‰¹å®šé¡å‹å…ƒç´ æ¸¬è©¦

### è‡ªå®šç¾©æ¸¬è©¦æµç¨‹

ç”¨æˆ¶å¯ä»¥è¼•é¬†ä¿®æ”¹ `main.py` ä¸­çš„æ¸¬è©¦é‚è¼¯ï¼š

```python
def basic_test_flow():
    # ä¿®æ”¹é€™äº›è¨­å®š
    TEST_URL = "https://your-website.com"  # æ¸¬è©¦ç¶²ç«™
    HEADLESS = False                       # æ˜¯å¦é¡¯ç¤ºç€è¦½å™¨
    MAX_CLICKS = 5                         # æœ€å¤§é»æ“Šæ¬¡æ•¸
    WINDOW_WIDTH = 640                     # ç€è¦½å™¨è¦–çª—å¯¬åº¦ï¼ˆåƒç´ ï¼‰
    
    engine = TestEngine(headless=HEADLESS, window_width=WINDOW_WIDTH)
    
    if engine.start_persistent_browser(TEST_URL):
        for step in range(MAX_CLICKS):
            # éš¨æ©Ÿé»æ“Šæˆ–æŒ‡å®šå…ƒç´ 
            element_choice = None  # None=éš¨æ©Ÿï¼Œæ•¸å­—=æŒ‡å®šå…ƒç´ 
            clicked, new_elements = engine.click_and_navigate(element_choice)
            
            if not clicked:
                break
        
        engine.close_browser()
```

## ğŸ’» ä½¿ç”¨æ–¹æ³•

### API ä½¿ç”¨ç¯„ä¾‹

#### åŸºæœ¬ä½¿ç”¨ï¼ˆç¬¬äºŒå±¤ APIï¼‰

```python
from engine import TestEngine

engine = TestEngine(headless=False, timeout=10, window_width=800)

# ä¸»è¦æ–¹æ³•
engine.start_persistent_browser(url)     # å•Ÿå‹•ç€è¦½å™¨
engine.print_current_elements()          # é¡¯ç¤ºå¯é»æ“Šå…ƒç´ 
engine.click_and_navigate(choice)        # é»æ“Šå…ƒç´ ä¸¦å°èˆª
engine.close_browser()                   # é—œé–‰ç€è¦½å™¨
```

#### é€²éšä½¿ç”¨ï¼ˆç›´æ¥ä½¿ç”¨ç¬¬ä¸‰å±¤ï¼‰

```python
from scraper import WebScraper

scraper = WebScraper(use_selenium=True, headless=False, window_width=1024)
elements = scraper.get_clickable_elements_from_url("https://example.com")
```

#### å¾ªç’°æª¢æ¸¬åŠŸèƒ½

ğŸ›‘ **é‡è¦åŠŸèƒ½ï¼šè‡ªå‹•å¾ªç’°æª¢æ¸¬**

ç³»çµ±æœƒè‡ªå‹•æª¢æ¸¬é é¢å¾ªç’°ï¼Œç•¶æœ€æ–°é é¢çš„å¯é»æ“Šå…ƒç´ èˆ‡ä¹‹å‰è¨ªå•éçš„é é¢å®Œå…¨ç›¸åŒæ™‚ï¼Œæœƒåœæ­¢æ¸¬è©¦ä¸¦ä¿æŒç€è¦½å™¨è¦–çª—é–‹å•Ÿã€‚

```python
from engine import TestEngine

engine = TestEngine(headless=False)
engine.start_persistent_browser("https://example.com")

# åŸ·è¡Œè‡ªå‹•æ¸¬è©¦ï¼ˆæœƒè‡ªå‹•æª¢æ¸¬å¾ªç’°ï¼‰
for step in range(10):
    clicked, new_elements = engine.click_and_navigate()
    
    # æª¢æŸ¥æ˜¯å¦æª¢æ¸¬åˆ°å¾ªç’°
    if engine.is_loop_detected:
        print("ğŸ”„ æª¢æ¸¬åˆ°é é¢å¾ªç’°ï¼Œæ¸¬è©¦å·²åœæ­¢")
        print("ğŸ” ç€è¦½å™¨ä¿æŒé–‹å•Ÿä¾›æª¢æŸ¥")
        break

# æŸ¥çœ‹å¾ªç’°æª¢æ¸¬ç‹€æ…‹
status = engine.get_loop_detection_status()
print(f"å·²è¨ªå• {status['pages_visited']} å€‹é é¢")
print(f"å…¶ä¸­ {status['unique_pages']} å€‹å”¯ä¸€é é¢")

# æ§åˆ¶å¾ªç’°æª¢æ¸¬
engine.disable_loop_detection()  # åœç”¨å¾ªç’°æª¢æ¸¬
engine.enable_loop_detection()   # å•Ÿç”¨å¾ªç’°æª¢æ¸¬
engine.reset_loop_detection()    # é‡ç½®æª¢æ¸¬ç‹€æ…‹
```

**å¾ªç’°æª¢æ¸¬ç‰¹é»ï¼š**
- ğŸ¯ **æ™ºèƒ½æ¯”è¼ƒ** - åŸºæ–¼é é¢å…ƒç´ é¡å‹ã€æ–‡å­—å’Œé€£çµçš„MD5ç°½å
- ğŸ“Š **æ­·å²è¿½è¹¤** - è¨˜éŒ„æœ€è¿‘20å€‹é é¢çš„ç°½åé¿å…è¨˜æ†¶é«”å•é¡Œ
- ğŸ”„ **éˆæ´»æ§åˆ¶** - å¯ä»¥å•Ÿç”¨/åœç”¨/é‡ç½®å¾ªç’°æª¢æ¸¬ç‹€æ…‹
- ğŸ“ **è©³ç´°æ—¥èªŒ** - å¾ªç’°æª¢æ¸¬äº‹ä»¶æœƒè¨˜éŒ„åˆ°æœƒè©±æ—¥èªŒä¸­
- ğŸ” **è¦–è¦ºåŒ–æª¢æŸ¥** - æª¢æ¸¬åˆ°å¾ªç’°æ™‚ä¿æŒç€è¦½å™¨é–‹å•Ÿä¾›è§€å¯Ÿ

**æ¸¬è©¦å¾ªç’°æª¢æ¸¬åŠŸèƒ½ï¼š**
```bash
python loop_detection_test.py
```

## ğŸ“ é …ç›®çµæ§‹

```
web-auto-test/
â”œâ”€â”€ main.py           # ğŸ¯ ç¬¬ä¸€å±¤ï¼šä¸»ç¨‹å¼
â”œâ”€â”€ engine.py         # ğŸ”§ ç¬¬äºŒå±¤ï¼šæ¸¬è©¦å¼•æ“
â”œâ”€â”€ scraper.py        # âš™ï¸ ç¬¬ä¸‰å±¤ï¼šç¶²é æŠ“å–å™¨
â”œâ”€â”€ test.py           # ğŸš€ å¿«é€Ÿæ¸¬è©¦
â”œâ”€â”€ requirements.txt  # ğŸ“¦ ä¾è³´é …ç›®
â”œâ”€â”€ README.md         # ğŸ“š å®Œæ•´ä½¿ç”¨èªªæ˜
â””â”€â”€ LICENSE          # ğŸ“„ æˆæ¬Šæ–‡ä»¶
```

## ğŸ® ä½¿ç”¨å ´æ™¯

### 1. åŸºæœ¬ç¶²ç«™æ¸¬è©¦
```python
# åœ¨ main.py ä¸­ä¿®æ”¹
TEST_URL = "https://your-site.com"
HEADLESS = False  # é¡¯ç¤ºç€è¦½å™¨
MAX_CLICKS = 10   # æ¸¬è©¦ 10 æ¬¡é»æ“Š
```

### 2. ç‰¹å®šå…ƒç´ æ¸¬è©¦
```python
def custom_test():
    engine = TestEngine(headless=False)
    if engine.start_persistent_browser("https://example.com"):
        # åªé»æ“Šé€£çµé¡å‹çš„å…ƒç´ 
        for element in engine.current_elements:
            if element['type'] == 'link':
                engine.click_and_navigate(element['id'])
                break
```

### 3. æ‰¹é‡ç¶²ç«™æ¸¬è©¦
```python
websites = [
    "https://site1.com",
    "https://site2.com", 
    "https://site3.com"
]

engine = TestEngine(headless=True)
for site in websites:
    elements = engine.get_page_elements(site)
    print(f"{site}: {len(elements)} å€‹å¯é»æ“Šå…ƒç´ ")
```

## ğŸ“Š è¼¸å‡ºç¯„ä¾‹

```
ğŸ¯ é–‹å§‹ç¶²é è‡ªå‹•æ¸¬è©¦
ğŸ“ æ¸¬è©¦ç¶²ç«™: https://www.pro360.com.tw
ğŸ‘€ ç€è¦½å™¨æ¨¡å¼: æœ‰é ­æ¨¡å¼
============================================================

ğŸ“‹ æ­¥é©Ÿ 1: å•Ÿå‹•ç€è¦½å™¨ä¸¦åˆ†æé é¢
ğŸ–¥ï¸ æª¢æ¸¬åˆ°è¢å¹•é«˜åº¦: 932px
ğŸ“ è¨­å®šç€è¦½å™¨è¦–çª—å¤§å°: 640x932
âœ… ç€è¦½å™¨å·²å•Ÿå‹•ï¼Œæ‰¾åˆ° 25 å€‹å¯é»æ“Šå…ƒç´ 

ğŸ“‹ ç•¶å‰é é¢çš„å¯é»æ“Šå…ƒç´  (å…± 25 å€‹):
================================================================================
 1. [LINK  ] é¦–é 
     ğŸ”— https://www.pro360.com.tw/
 2. [LINK  ] æ‰¾å°ˆå®¶
     ğŸ”— https://www.pro360.com.tw/search
 3. [BUTTON] ç™»å…¥
...
```

## ğŸ› ï¸ é€²éšè¨­å®š

### ç€è¦½å™¨è¨­å®š
- **è¦–çª—å¤§å°**ï¼šå¯è‡ªè¨‚å¯¬åº¦ï¼ˆé è¨­ 640pxï¼‰Ã— å…¨è¢å¹•é«˜åº¦
- **æ¨¡å¼**ï¼šæ”¯æ´æœ‰é ­/ç„¡é ­æ¨¡å¼
- **è‡ªå‹•ç®¡ç†**ï¼šè‡ªå‹•ä¸‹è¼‰å’Œé…ç½® ChromeDriver

### å…ƒç´ è­˜åˆ¥
- **é€£çµ**ï¼š`<a>` æ¨™ç±¤
- **æŒ‰éˆ•**ï¼š`<button>` å’Œ `<input type="button/submit/reset">`
- **äº’å‹•å…ƒç´ **ï¼šå…·æœ‰ `onclick` äº‹ä»¶çš„å…ƒç´ 

## ğŸ“ æœƒè©±æ—¥èªŒåŠŸèƒ½

æ¯æ¬¡æ¸¬è©¦æœƒè©±éƒ½æœƒè‡ªå‹•ç”Ÿæˆçµæ§‹åŒ–çš„ JSON æ—¥èªŒï¼Œå°ˆç‚º LLM åˆ†æè€Œå„ªåŒ–ï¼Œå¹«åŠ©æ‚¨è¿½è¹¤æ¸¬è©¦éç¨‹ã€åˆ†æçµæœå’Œèª¿è©¦å•é¡Œã€‚

### ğŸ¯ æ—¥èªŒç‰¹è‰²

- **LLM å„ªåŒ–** - JSON æ ¼å¼ï¼Œå°ˆç‚º AI åˆ†æè€Œè¨­è¨ˆ
- **è‡ªå‹•è¨˜éŒ„** - ç„¡éœ€é¡å¤–é…ç½®ï¼Œé»˜èªå•Ÿç”¨
- **å®Œæ•´è¿½è¸ª** - è¨˜éŒ„æ¯å€‹æ­¥é©Ÿçš„æ™‚é–“æˆ³ã€æ“ä½œå’Œçµæœ
- **éŒ¯èª¤æ•ç²** - è©³ç´°è¨˜éŒ„å¤±æ•—åŸå› å’ŒéŒ¯èª¤ä¿¡æ¯
- **æ€§èƒ½åˆ†æ** - è‡ªå‹•è¨ˆç®—æˆåŠŸç‡ã€å¹³å‡å…ƒç´ æ•¸ç­‰é—œéµæŒ‡æ¨™
- **çµæ§‹åŒ–æ•¸æ“š** - ä¾¿æ–¼ LLM è§£æå’Œåˆ†æçš„æ¨™æº–åŒ–æ ¼å¼

### ğŸ“ æ—¥èªŒæ–‡ä»¶çµæ§‹

æ¯æ¬¡æ¸¬è©¦æœƒè©±æœƒåœ¨ `logs/` ç›®éŒ„ä¸‹ç”Ÿæˆä¸€å€‹ JSON æ–‡ä»¶ï¼š

```
logs/
â””â”€â”€ test_20241220_143052.json    # LLM åˆ†æå‹å¥½çš„çµæ§‹åŒ–æ—¥èªŒ
```

### ğŸ“Š JSON æ—¥èªŒæ ¼å¼èªªæ˜

æ—¥èªŒæ¡ç”¨çµæ§‹åŒ– JSON æ ¼å¼ï¼ŒåŒ…å«ä»¥ä¸‹ä¸»è¦éƒ¨åˆ†ï¼š

```json
{
  "session_id": "test_20241220_143052",
  "start_time": "2024-12-20T14:30:52.123456",
  "end_time": "2024-12-20T14:35:15.789012",
  "config": {
    "headless": false,
    "timeout": 10,
    "window_width": 640,
    "url": "https://www.example.com"
  },
  "steps": [
    {
      "step": 1,
      "timestamp": "2024-12-20T14:30:55.456789",
      "type": "start_browser",
      "details": {
        "url": "https://www.example.com",
        "window_width": 640,
        "initial_elements_count": 8
      },
      "result": "success",
      "error": null
    },
    {
      "step": 2,
      "timestamp": "2024-12-20T14:31:02.123456",
      "type": "click",
      "details": {
        "clicked_element": {
          "type": "link",
          "text": "é¦–é é€£çµ",
          "href": "https://www.example.com/home"
        },
        "new_elements_count": 15,
        "choice_method": "random"
      },
      "result": "success",
      "error": null
    }
  ],
  "errors": [],
  "summary": {
    "total_steps": 8,
    "successful_steps": 7,
    "failed_steps": 1,
    "total_errors": 1,
    "final_elements_count": 12,
    "duration_seconds": 263.08,
    "success_rate": 0.875,
    "avg_elements_per_page": 13.5
  },
  "metadata": {
    "version": "1.0",
    "tool": "web-auto-test",
    "analysis_ready": true,
    "llm_instructions": "This is an automated web testing session log. Analyze patterns, failures, and performance metrics.",
    "key_metrics": [
      "duration_seconds",
      "success_rate",
      "total_errors", 
      "avg_elements_per_page"
    ]
  }
}
```

### âš™ï¸ æ—¥èªŒé…ç½®

åœ¨æ¸¬è©¦å‡½æ•¸ä¸­å¯ä»¥æ§åˆ¶æ—¥èªŒåŠŸèƒ½ï¼š

```python
def basic_test_flow():
    ENABLE_LOGS = True   # å•Ÿç”¨ LLM åˆ†ææ—¥èªŒ (é è¨­)
    # ENABLE_LOGS = False  # åœç”¨æ—¥èªŒ
    
    engine = TestEngine(
        headless=False,
        window_width=640,
        enable_session_log=ENABLE_LOGS  # å‚³éæ—¥èªŒè¨­å®š
    )
```

### ğŸ¤– LLM åˆ†æå»ºè­°

å°‡æ—¥èªŒæ–‡ä»¶ç™¼é€çµ¦ LLM æ™‚ï¼Œå¯ä»¥è¦æ±‚åˆ†æä»¥ä¸‹æ–¹é¢ï¼š

1. **æ€§èƒ½è©•ä¼°** - åˆ†æ `success_rate` å’Œ `duration_seconds`
2. **éŒ¯èª¤æ¨¡å¼** - æª¢æŸ¥ `errors` é™£åˆ—ä¸­çš„å¤±æ•—æ¨¡å¼
3. **å…ƒç´ è±å¯Œåº¦** - è©•ä¼° `avg_elements_per_page` æŒ‡æ¨™
4. **æ“ä½œæµç¨‹** - åˆ†æ `steps` ä¸­çš„é»æ“Šè·¯å¾‘å’Œæ¨¡å¼
5. **é…ç½®å„ªåŒ–** - åŸºæ–¼çµæœå»ºè­°æœ€ä½³çš„ `window_width` å’Œ `timeout` è¨­å®š

### ğŸ”§ æ—¥èªŒç®¡ç†

```bash
# æŸ¥çœ‹æœ€æ–°çš„æ¸¬è©¦æ—¥èªŒ
ls -la logs/ | head -10

# æ¸…ç†èˆŠæ—¥èªŒæ–‡ä»¶ï¼ˆä¿ç•™æœ€è¿‘ 7 å¤©ï¼‰
find logs/ -name "*.json" -mtime +7 -delete

# æ‰¹é‡ç™¼é€çµ¦ LLM åˆ†æ
cat logs/test_*.json | jq '.'  # æ ¼å¼åŒ–æŸ¥çœ‹
```

## ğŸ” ç–‘é›£æ’è§£

### å¸¸è¦‹å•é¡Œ

1. **Chrome ç€è¦½å™¨æœªå®‰è£**
   ```
   è§£æ±ºæ–¹æ¡ˆï¼šä¸‹è¼‰ä¸¦å®‰è£ Google Chrome
   ```

2. **æ¬Šé™å•é¡Œ**
   ```bash
   pip install --user -r requirements.txt
   ```

3. **ç¶²è·¯é€£ç·šå•é¡Œ**
   ```
   æª¢æŸ¥ç¶²è·¯é€£ç·šå’Œé˜²ç«ç‰†è¨­å®š
   ```

### èª¿è©¦æ¨¡å¼

```python
import logging
logging.basicConfig(level=logging.INFO)

# ç„¶å¾ŒåŸ·è¡Œæ¸¬è©¦
```

## ğŸ”§ é–‹ç™¼æŒ‡å—

### ä¿®æ”¹æ¸¬è©¦æµç¨‹

1. **åŸºæœ¬ä¿®æ”¹**ï¼šç›´æ¥ç·¨è¼¯ `main.py` ä¸­çš„å‡½æ•¸
2. **æ–°å¢æ¸¬è©¦æ¨¡å¼**ï¼šåœ¨ `main.py` ä¸­æ·»åŠ æ–°çš„æ¸¬è©¦å‡½æ•¸
3. **ä¿®æ”¹æ¸¬è©¦å¼•æ“**ï¼šåœ¨éœ€è¦æ–°åŠŸèƒ½æ™‚ä¿®æ”¹ `engine.py`

### è‡ªè¨‚è¦–çª—å¯¬åº¦

åœ¨å„å€‹æ¸¬è©¦å‡½æ•¸ä¸­ä¿®æ”¹ `WINDOW_WIDTH` è®Šæ•¸ï¼š

```python
def basic_test_flow():
    WINDOW_WIDTH = 800  # ä¿®æ”¹ç‚ºæ‚¨æƒ³è¦çš„å¯¬åº¦
    engine = TestEngine(headless=False, window_width=WINDOW_WIDTH)
    # ... å…¶ä»–ä»£ç¢¼
```

ä¸åŒå ´æ™¯çš„å»ºè­°å¯¬åº¦ï¼š
- **æ‰‹æ©Ÿæ¨¡æ“¬**ï¼š375px æˆ– 414px
- **å¹³æ¿æ¨¡æ“¬**ï¼š768px æˆ– 1024px  
- **æ¡Œé¢æ¨™æº–**ï¼š1200px æˆ– 1440px
- **çª„å±æ¸¬è©¦**ï¼š640pxï¼ˆé è¨­ï¼‰

### è‡ªè¨‚æ—¥èªŒåŠŸèƒ½

æ§åˆ¶æœƒè©±æ—¥èªŒçš„å•Ÿç”¨/åœç”¨ï¼š

```python
def my_custom_test():
    ENABLE_LOGS = True   # å•Ÿç”¨ LLM åˆ†ææ—¥èªŒ
    # ENABLE_LOGS = False  # åœç”¨æ—¥èªŒä»¥æå‡æ€§èƒ½
    
    engine = TestEngine(
        headless=False,
        window_width=800,
        enable_session_log=ENABLE_LOGS
    )
    
    try:
        # æ‚¨çš„æ¸¬è©¦é‚è¼¯
        engine.start_persistent_browser("https://example.com")
        # ... æ¸¬è©¦æ­¥é©Ÿ
    finally:
        engine.close_browser()
        
        # é¡¯ç¤ºæ—¥èªŒæ–‡ä»¶è·¯å¾‘
        if ENABLE_LOGS and engine.session_id:
            print(f"ğŸ“Š LLM åˆ†ææ—¥èªŒ: logs/{engine.session_id}.json")
```

**æ—¥èªŒä½¿ç”¨å ´æ™¯ï¼š**
- **LLM åˆ†æ** - å°‡æ—¥èªŒç™¼é€çµ¦ AI é€²è¡Œæ·±åº¦åˆ†æ
- **é–‹ç™¼èª¿è©¦** - å•Ÿç”¨è©³ç´°æ—¥èªŒè¿½è¹¤å•é¡Œ
- **è‡ªå‹•åŒ–æ¸¬è©¦** - è¨˜éŒ„æ¸¬è©¦çµæœä¾›å¾ŒçºŒåˆ†æ
- **æ€§èƒ½æ¸¬è©¦** - åœç”¨æ—¥èªŒæ¸›å°‘ I/O é–‹éŠ·
- **æ‰¹é‡æ¸¬è©¦** - æ”¶é›†å¤šå€‹æœƒè©±æ•¸æ“šé€²è¡Œæ¯”è¼ƒåˆ†æ

### æ·»åŠ æ–°åŠŸèƒ½

1. **ç¬¬ä¸‰å±¤**ï¼šåœ¨ `scraper.py` ä¸­æ·»åŠ æ–°çš„åº•å±¤åŠŸèƒ½
2. **ç¬¬äºŒå±¤**ï¼šåœ¨ `engine.py` ä¸­åŒ…è£æ–°åŠŸèƒ½
3. **ç¬¬ä¸€å±¤**ï¼šåœ¨ `main.py` ä¸­ä½¿ç”¨æ–°åŠŸèƒ½

### éŒ¯èª¤è™•ç†åˆ†å±¤

- **ç¬¬ä¸€å±¤**ï¼šè™•ç†ç”¨æˆ¶è¼¸å…¥éŒ¯èª¤
- **ç¬¬äºŒå±¤**ï¼šè™•ç†æ¥­å‹™é‚è¼¯éŒ¯èª¤
- **ç¬¬ä¸‰å±¤**ï¼šè™•ç†æŠ€è¡“å¯¦ç¾éŒ¯èª¤

### æ·»åŠ æ–°çš„æ¸¬è©¦æ¨¡å¼
åœ¨ `main.py` ä¸­æ·»åŠ æ–°å‡½æ•¸ï¼š

```python
def my_custom_test():
    engine = TestEngine(headless=False)
    # ä½ çš„æ¸¬è©¦é‚è¼¯
    pass

# åœ¨ main() å‡½æ•¸ä¸­æ·»åŠ é¸é …
```

### è‡ªå®šç¾©å…ƒç´ éæ¿¾
ä¿®æ”¹ `engine.py` ä¸­çš„ `_simplify_elements` æ–¹æ³•ã€‚

### æ–°å¢ç€è¦½å™¨æ”¯æ´  
ä¿®æ”¹ `scraper.py` ä¸­çš„ `_setup_driver` æ–¹æ³•ã€‚

## ğŸ“ˆ æ“´å±•æ€§

## ğŸ“„ æˆæ¬Š

MIT License - è©³è¦‹ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ¤ è²¢ç»

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“ æ”¯æ´

å¦‚æœé‡åˆ°å•é¡Œï¼Œè«‹æŸ¥çœ‹ï¼š
1. ä¸Šè¿°ç–‘é›£æ’è§£ç« ç¯€
2. GitHub Issues
3. ä»£ç¢¼ä¸­çš„è¨»é‡‹å’Œæ–‡æª”å­—ç¬¦ä¸²

---

ğŸ’¡ **æç¤º**: ä¿®æ”¹æ¸¬è©¦æµç¨‹åªéœ€ç·¨è¼¯ `main.py`ï¼Œç„¡éœ€äº†è§£åº•å±¤å¯¦ç¾ç´°ç¯€ï¼
